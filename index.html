<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bulk convert boardgame name to BGG ID</title>
    <script defer src="index.js"></script>
    <style>
      #input {
        display: flex;
        flex-direction: column;
        gap: 20px;
        align-items: center;
      }

      #processing {
        display: grid;
        grid-template-columns: 1fr 3fr;
        gap: 20px;
        padding: 0 30px;
      }

      h3 {
        text-align: center;
      }

      #sidebar .skip-to-end {
        margin: 20px auto;
        display: block;
      }

      #container-progress-table {
        max-height: calc(100vh - 75px);
        overflow-y: scroll;
      }

      #progress-table {
        border-collapse: collapse;
        width: 100%;
      }

      td,
      th {
        border: 1px solid grey;
        padding: 5px;
        width: 50%;
        min-width: 100px;
        max-width: 150px;
        width: min-content;
        overflow: hidden;
      }

      #tile-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        justify-items: center;
        gap: 10px;
        align-items: center;
      }

      .tile {
        text-align: center;
      }

      .tile img {
        max-width: 150px;
        cursor: pointer;
      }

      #modal-background {
        width: 100vw;
        height: 100vh;
        position: fixed;
        left: 0;
        top: 0;
        display: flex;
        justify-content: center;
        background: #00000099;
        align-items: center;
      }

      #modal-too-many-requests {
        background: #fff;
        padding: 10px 40px;
        border-radius: 5px;
      }

      .hidden {
        display: none !important;
      }

      #results {
        width: max(80%, 400px);
        margin: auto;
      }

      #id-list {
        color: green;
      }

      #no-matches,
      #skipped {
        color: red;
      }

      #restart {
        display: block;
        margin: auto;
      }
    </style>
  </head>
  <body>
    <section id="input">
      <h3>
        Please provide a comma-separated list of game names by uploading a file
        or pasting in the textarea.
      </h3>
      <input type="file" />
      <textarea cols="30" rows="10"></textarea>
      <button id="start">Start</button>
    </section>
    <section id="processing" class="hidden">
      <div id="sidebar">
        <button class="skip-to-end">Skip to final results</button>
        <div id="container-progress-table">
          <table id="progress-table">
            <thead>
              <tr>
                <th colspan="2">Progress</th>
              </tr>
              <tr>
                <th scope="col">Name</th>
                <th scope="col">Status</th>
              </tr>
            </thead>
          </table>
        </div>
      </div>
      <div id="ask-for-clarification">
        <div id="modal-background" class="hidden">
          <div id="modal-too-many-requests">
            <p>
              The BoardGameGeek API is getting too many requests. Sit back and
              wait a little bit.
            </p>
            <p>Automatic retry in: <span id="countdown-till-retry"></span></p>
            <p>
              Or:
              <button class="skip-to-end">
                Skip to results to store current progress
              </button>
            </p>
          </div>
        </div>
        <h3 id="heading-processing">Processing your list...</h3>
        <h3 id="heading-choose-game" class="hidden">
          There has been no clear match for "<span
            id="search-term-in-heading"
          ></span
          >". Please choose the right game by clicking on the thumbnail.
        </h3>
        <div id="tile-container"></div>
      </div>
    </section>
    <section id="results" class="hidden">
      <h3>Proccessing completed.</h3>
      <p id="paragraph-id-list" class="hidden">
        Your ID list: <code id="id-list"></code>
      </p>
      <p id="paragraph-no-matches" class="hidden">
        There have been no matches for the following games (please search for
        these games manually or fix spelling mistakes and try again): <br />
        <code id="no-matches"></code>
      </p>
      <p id="paragraph-skipped" class="hidden">
        You skipped the following games from your list:
        <code id="skipped"></code>
      </p>
      <button onclick="location.reload()" id="restart">Restart</button>
    </section>
  </body>
</html>
