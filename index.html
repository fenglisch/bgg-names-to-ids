<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bulk Convert Boardgame Name to BoardGameGeek ID</title>
    <script defer src="index.js"></script>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="sidebar">
      <div id="input-explanation" class="visible-at-input">
        <h4>Purpose of this website</h4>
        <p>
          This website helps you to identify the
          <a href="https://boardgamegeek.com/" target="_blank">BoardGameGeek</a>
          (BGG) ID's of your boardgames. With your ID list, you can then bulk
          upload your games into your BGG Collection using
          <a href="#">this program</a>.
        </p>
        <h4>How it works</h4>
        <p>
          This website sends the names you provide as search queries to the BGG
          database (via their XML API2). When their is no unique match, the
          website will ask you for clarification.
        </p>
        <p>
          To spare the BGG API from too many requests, there is a short break of
          0.75 seconds between each new search query. Nevertheless, it can
          happen that the BGG servers need some time to breathe in between
          (especially if you provide a long list of games). This will only cause
          a short delay, so don't worry.
        </p>
      </div>
      <div id="container-progress-table" class="visible-at-processing hidden">
        <table id="progress-table">
          <thead>
            <tr>
              <th colspan="2">Progress</th>
            </tr>
            <tr>
              <th scope="col">Name</th>
              <th scope="col">Status</th>
            </tr>
          </thead>
        </table>
        <button class="skip-to-end">Skip to final results</button>
      </div>
      <div class="visible-at-results"></div>
    </div>
    <div id="header">
      <h1>Bulk Convert Boardgame Names to BoardGameGeek ID's</h1>
    </div>
    <div id="main">
      <div id="input-container" class="visible-at-input">
        <textarea
          placeholder='Paste a comma-separated list with the names of your games.&#10;Wrap the names in "quotes", if they include a comma.'
        ></textarea>
        <div>
          <input type="checkbox" id="includeExpansions" />
          <label for="includeExpansions"
            >Also search for Boardgame Expansions?</label
          >
        </div>
        <button type="submit" id="start">Start</button>
      </div>
      <div id="processing-container" class="visible-at-processing hidden">
        <div id="modal-background" class="hidden">
          <div id="modal-too-many-requests">
            <p>
              The BoardGameGeek API is getting too many requests. Sit back and
              wait a little bit.
            </p>
            <p>Automatic retry in: <span id="countdown-till-retry"></span></p>
            <p>
              Or:
              <button class="skip-to-end">
                Skip to results to store current progress
              </button>
            </p>
          </div>
        </div>
        <h4 id="heading-processing">Processing your list...</h4>
        <div id="heading-choose-game" class="hidden">
          <h3>
            There has been no clear match for
            <span id="search-term-in-heading"></span>.
          </h3>
          <h3>Please choose the right game by clicking on the thumbnail.</h3>
        </div>
        <div id="tile-container"></div>
      </div>
      <div id="results-container" class="visible-at-results hidden">
        <h2>Proccessing completed.</h2>
        <p id="paragraph-id-list" class="hidden">
          Your ID list: <br />
          <code id="id-list"></code>
        </p>
        <p id="paragraph-no-matches" class="hidden">
          There have been no matches for the following games (please search for
          these games manually or fix spelling mistakes and try again): <br />
          <code id="no-matches"></code>
        </p>
        <p id="paragraph-skipped" class="hidden">
          You skipped the following games from your list: <br />
          <code id="skipped"></code>
        </p>
        <div id="results-buttons">
          <button id="download">Download Results as CSV</button>
          <button onclick="location.reload()" id="restart">Restart</button>
        </div>
      </div>
    </div>
  </body>
</html>
